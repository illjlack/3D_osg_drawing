Qt 是“事件驱动”（event-driven）机制，事件循环运行在主线程（GUI 线程）里。

日志系统分为两个部分

一个是日志管理线程，这个是日志系统的主要部分。

一个是ui窗口，因为在GUI线程上，不应该大量更新。

我的想法是有时间缀，接受到更新信号的时候记录时间，并从日志系统里获取日志（可以直接给内存的指针，前端只读，且只读时间缀与上次读时间之内的，应该不影响日志线程的竞争吧），以追加文本块的方式加到`QPlainTextEdit`里。然后后面来的在时间缀之前的信号不处理。

这能保证没有无效的更新。



还是太复杂，决定目前放弃。

| 问题         | 优化建议                                      |
| ------------ | --------------------------------------------- |
| 读写冲突     | 使用无锁环形队列或双缓冲 + 极短互斥保护       |
| 信号过多     | 批量打包 & 固定周期 `emit`                    |
| 数据拷贝开销 | 传时间戳／条数→UI 拉取；或用 `QSharedPointer` |
| UI 更新性能  | 按块追加 + 裁剪旧行 + 暂停重绘                |